SET SESSION FOREIGN_KEY_CHECKS=0;

/* Drop Tables */

DROP TABLE IF EXISTS TB_USERAUTH;
DROP TABLE IF EXISTS TB_ROLE;
DROP TABLE IF EXISTS TB_USER;




/* Create Tables */

CREATE TABLE TB_ROLE
(
	ROLE_ID varchar(10) NOT NULL,
	ROLE_NM varchar(9),
	RGST_DT timestamp DEFAULT NOW() NOT NULL,
	RGST_ID varchar(20),
	UPDT_DT timestamp DEFAULT NOW() NOT NULL,
	UPDT_ID varchar(20),
	DEL_YN char(1) DEFAULT 'N' NOT NULL,
	PRIMARY KEY (ROLE_ID)
);


CREATE TABLE TB_USER
(
	USER_ID varchar(20) NOT NULL,
	USER_PW varchar(64),
	USER_NM varchar(5),
	RGST_DT timestamp DEFAULT NOW() NOT NULL,
	RGST_ID varchar(20),
	UPDT_DT timestamp DEFAULT NOW() NOT NULL,
	UPDT_ID varchar(20),
	DEL_YN char(1) DEFAULT 'N' NOT NULL,
	PRIMARY KEY (USER_ID)
);


CREATE TABLE TB_USERAUTH
(
	USER_ID varchar(20) NOT NULL,
	ROLE_ID varchar(10) NOT NULL
);



/* Create Foreign Keys */

ALTER TABLE TB_USERAUTH
	ADD FOREIGN KEY (ROLE_ID)
	REFERENCES TB_ROLE (ROLE_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;


ALTER TABLE TB_USERAUTH
	ADD FOREIGN KEY (USER_ID)
	REFERENCES TB_USER (USER_ID)
	ON UPDATE RESTRICT
	ON DELETE RESTRICT
;



